version: '3.8'

services:
  # 统一的游戏服务（包含 SWI-Prolog 和 PDDL4J）
  game:
    build:
      context: .
      dockerfile: Dockerfile.game
      # 代理配置（可选，如果代理不可用可以注释掉或留空）
      # 注意：如果代理只监听 127.0.0.1，容器无法访问，需要配置代理监听 0.0.0.0:7890
      args:
        HTTP_PROXY: ""
        HTTPS_PROXY: ""
        NO_PROXY: localhost,127.0.0.1
    container_name: liminal-logic-game
    volumes:
      - .:/workspace
      - pddl4j-cache:/root/.gradle
    working_dir: /workspace
    stdin_open: true
    tty: true
    command: swipl -s prolog/main.pl -g start
    networks:
      - liminal-network
   

networks:
  liminal-network:
    driver: bridge

volumes:
  pddl4j-cache:
    driver: local

